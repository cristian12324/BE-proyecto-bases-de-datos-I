<div class="servicio-list-container">
  <h2>Lista de Servicios</h2>

  <ul>
    <li *ngFor="let s of servicios">
      <div class="servicio-item">
        <div class="servicio-info">
          {{ s.nombreServi }} — {{ s.descripcionServi }} — {{ s.precioServi | currency }} — {{ s.duracionMin }} min
        </div>

        <div class="button-group">
          <!-- Solo visible si NO es paciente -->
          <button *ngIf="rolUsuario !== 'paciente'" (click)="editar(s)">Editar</button>
          <button *ngIf="rolUsuario !== 'paciente'" (click)="eliminar(s.idServicio)">Eliminar</button>

          <!-- Botón “Solicitar” solo visible para Paciente -->
          <button *ngIf="rolUsuario === 'paciente'" (click)="solicitarServicio(s.idServicio!)">
            Solicitar
          </button>
        </div>
      </div>
    </li>
  </ul>

  <!-- Formulario solo visible si NO es paciente -->
  <div class="servicio-form" *ngIf="servicio && rolUsuario !== 'paciente'">
    <h3>{{ servicio.idServicio ? 'Editar Servicio' : 'Nuevo Servicio' }}</h3>

    <form (ngSubmit)="guardar()">
      <div>
        <label>Nombre:</label>
        <input type="text" [(ngModel)]="servicio.nombreServi" name="nombre" required />
      </div>

      <div>
        <label>Descripción:</label>
        <input type="text" [(ngModel)]="servicio.descripcionServi" name="descripcion" required />
      </div>

      <div>
        <label>Precio:</label>
        <input type="number" [(ngModel)]="servicio.precioServi" name="precio" required />
      </div>

      <div>
        <label>Duración (min):</label>
        <input type="number" [(ngModel)]="servicio.duracionMin" name="duracion" required />
      </div>

      <div class="button-group">
        <button type="submit">{{ servicio.idServicio ? 'Actualizar' : 'Guardar' }}</button>
        <button type="button" (click)="cancelar()">Cancelar</button>
      </div>
    </form>

    <p *ngIf="mensaje" class="mensaje">{{ mensaje }}</p>
  </div>
</div>
